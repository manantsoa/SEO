<% content_for :head do %>
<div id="Menu-top">
	<ul>
		<li><%= link_to "Liste des rapports", "../report" %></li>
		<li><%= link_to "Index", root_path %></li>
		<li><%= link_to "Ajouter un site", crawler_path %></li>
	</ul>
</div>
<% end %>
<center><h1> Rapport du site <%= @site.name %> </h1> <br /><br />

Adresse URL     : <%= @site.url %> <br />
Nombre de pages : <%= @site.pages.count %> <br />

Erreurs de balises < hx > :
<font color=<% if @err[:hx].count == 0 %> "green" <% else %> "red" <% end %>>
<% if @err[:hx].count == 0 %>
	Aucune erreur<br />
<%else%>
	<%= @err[:hx].count %> erreurs<br />
<% end %>
</font>
<br/>
<% @site.pages.each do |p| %>
	<%= link_to p.url, '/report/' + @site.id.to_s + '/' + p.id.to_s %>
	<% (0..@err[:hx].count - 1).each do |e| %>
		<% if @err[:hx][e][:file].url.to_s == p.url.to_s %>
			<font color="red">Erreur sur la balise ligne <%= @err[:hx][e][:curr][:pos].to_s %></font>
		<% end %>
	<% end %>
	<% if p.imgs.where(title:nil).count > 0 %><font color="red">
		<br/>
	 	Images sans Title : <%= p.imgs.where(title:nil).count %>
		</font>
		<br/>
	<%end %>
	<% if p.imgs.where(alt:nil).count > 0 %><font color="red"> 
	 	Images sans Alt : <%= p.imgs.where(alt:nil).count %>
		</font>
		<br/>
	<%end %>
	<% if p.html_errors.count > 0 %>
		<font color="red"> Erreurs HTML : <%= p.html_errors.count %></font>
		<br/>
	<% end %>
<% end %>